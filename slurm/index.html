
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://asm-dtu.gitlab.io/niflheim-quickstart/slurm/">
      
      
        <link rel="prev" href="../quickstart/">
      
      
        <link rel="next" href="../modules/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.17">
    
    
      
        <title>Submit jobs - Niflheim Quickstart</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.bcfcd587.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#submitting-jobs-with-slurm" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Niflheim Quickstart" class="md-header__button md-logo" aria-label="Niflheim Quickstart" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Niflheim Quickstart
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Submit jobs
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Niflheim Quickstart" class="md-nav__button md-logo" aria-label="Niflheim Quickstart" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Niflheim Quickstart
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../quickstart/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quickstart
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Submit jobs
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Submit jobs
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#slurm-job-script" class="md-nav__link">
    <span class="md-ellipsis">
      Slurm Job Script
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basic-slurm-commands" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Slurm Commands
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#other-references" class="md-nav__link">
    <span class="md-ellipsis">
      Other references
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#slurm-helper-scripts" class="md-nav__link">
    <span class="md-ellipsis">
      Slurm helper scripts
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../modules/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Software Modules
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../storage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Storage
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../editing-files/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    File editing
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../linux/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Useful Linux Commands
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#slurm-job-script" class="md-nav__link">
    <span class="md-ellipsis">
      Slurm Job Script
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basic-slurm-commands" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Slurm Commands
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#other-references" class="md-nav__link">
    <span class="md-ellipsis">
      Other references
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#slurm-helper-scripts" class="md-nav__link">
    <span class="md-ellipsis">
      Slurm helper scripts
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="submitting-jobs-with-slurm">Submitting jobs with Slurm<a class="headerlink" href="#submitting-jobs-with-slurm" title="Permanent link">#</a></h1>
<p>This page will introduce you to submitting jobs with Slurm and some of the most useful Slurm commands that you can use on Niflheim. Slurm is a workload manager that allocates resources and schedules jobs on the cluster. You can use Slurm commands to submit, monitor, control, and manage your jobs.</p>
<h2 id="slurm-job-script">Slurm Job Script<a class="headerlink" href="#slurm-job-script" title="Permanent link">#</a></h2>
<p>A Slurm job script is a file that contains the parameters and commands for your job. You can use it to submit your job to the cluster with the <code>sbatch</code> command. A Slurm job script usually has two parts: a header and a body. The header contains lines that start with <code>#SBATCH</code> and specify the parameters for your job, such as the number of nodes, cores, memory, time, etc. The body contains the commands that you want to run on the allocated nodes, such as loading modules, running programs, copying files, etc.</p>
<p>Here is an example of a Slurm job script that runs a Python script called <code>hello.py</code> on one node with 16 cores for 10 minutes:</p>
<pre><code class="language-bash">#!/bin/bash
#SBATCH --nodes=1
#SBATCH --ntasks-per-node=24
#SBATCH --partition=xeon24
#SBATCH --time=0-00:10:00  # 10 minutes
#SBATCH --job-name=hello
#SBATCH --output=hello.out

module load Python/3.11.3-GCCcore-12.3.0
python hello.py
</code></pre>
<p>You can save this script as <code>hello.sh</code> and submit it to the cluster with this command:</p>
<pre><code class="language-bash">sbatch hello.sh
</code></pre>
<p>The body for running a calculation with the AMS package could be:</p>
<pre><code class="language-bash"># Load the software modules
module use /home/energy/modules/modules/all
module load AMS/2023

# Run the program
ams inputfile
</code></pre>
<p>See also <a href="../editing-files/">how to edit files.</a></p>
<p>If you feel it is too cumbersome to create submit files for <code>sbatch</code>, then <a href="https://myqueue.readthedocs.io/en/latest/"><code>myqueue</code></a> might be something for you.</p>
<h2 id="basic-slurm-commands">Basic Slurm Commands<a class="headerlink" href="#basic-slurm-commands" title="Permanent link">#</a></h2>
<p>Here are some basic Slurm commands and their usage:</p>
<ul>
<li>
<p><code>sbatch</code>: This command submits a job script to the cluster. A job script is a file that contains the parameters and commands for your job. For example, <code>sbatch hello.sh</code> will submit the job script <code>hello.sh</code> to the cluster. You can also specify some parameters as options in the command line, such as <code>-N</code> for number of nodes, <code>-n</code> for number of tasks, <code>-c</code> for number of cores per task, <code>-t</code> for time limit, etc. For example, <code>sbatch -N 2 -n 4 -c 2 -t 10:00 hello.sh</code> will submit the job script <code>hello.sh</code> with 2 nodes, 4 tasks, 2 cores per task, and 10 minutes time limit. These arguments can also be set with the <code>#SBATCH</code> instruction in the <code>hello.sh</code> script itself.</p>
</li>
<li>
<p><code>squeue</code>: This command shows the status of the jobs in the cluster. For example, <code>squeue</code> will show all the jobs in the cluster with their job ID, partition, name, user, state, time, nodes, node list, etc. You can also use options to filter or format the output, such as <code>-u</code> for user name, <code>-p</code> for partition name, <code>-o</code> for output format, etc. For example, <code>squeue -u user</code> will show only the jobs submitted by user <code>user</code>, while <code>squeue -o "%i %j %T"</code> will show only the job ID, name, and state of each job.</p>
</li>
<li>
<p><code>scancel</code>: This command cancels a job or a group of jobs in the cluster. For example, <code>scancel 123456</code> will cancel the job with ID 123456. You can also use options to specify criteria for cancelling jobs, such as <code>-u</code> for user name, <code>-p</code> for partition name, <code>-t</code> for job state, etc. For example, <code>scancel -u user -t PENDING</code> will cancel all the pending jobs submitted by user <code>user</code>.</p>
</li>
</ul>
<!-- - `sinfo`: This command shows the status of the partitions and nodes in the cluster. For example, `sinfo` will show all the partitions and nodes in the cluster with their name, size, state, time limit, nodes, node list, etc. You can also use options to filter or format the output, such as `-p` for partition name, `-N` for node name, `-o` for output format, etc. For example, `sinfo -p batch -N -o "%n %T %C"` will show only the node name, state, and CPU allocation of each node in the batch partition. -->

<!-- - `srun`: This command runs a command or a program on a set of allocated nodes in the cluster. For example, `srun hostname` will run the hostname command on each allocated node and print the output. You can also use options to specify parameters for your job, such as `-N` for number of nodes, `-n` for number of tasks, `-c` for number of cores per task, `-t` for time limit, etc. For example, `srun -N 2 -n 4 -c 2 -t 10:00 python hello.py` will run the python script `hello.py` on 2 nodes with 4 tasks and 2 cores per task for 10 minutes. -->

<h2 id="other-references">Other references<a class="headerlink" href="#other-references" title="Permanent link">#</a></h2>
<ul>
<li><a href="https://wiki.fysik.dtu.dk/Niflheim_users/Niflheim_Getting_Started/#submitting-batch-jobs-to-niflheim">Niflheim wiki - Submitting batch jobs to Niflheim</a></li>
<li><a href="https://slurm.schedmd.com/tutorials.html">Slurm Workload Manager - Slurm Tutorials - SchedMD</a></li>
<li><a href="https://blog.ronin.cloud/slurm-intro/">A simple Slurm guide for beginners - RONIN BLOG</a></li>
<li><a href="https://gowda.ai/slurm101/">Slurm Tutorial - Gowda</a></li>
<li><a href="https://slurm.schedmd.com/quickstart.html">Slurm Workload Manager - Quick Start User Guide - SchedMD</a></li>
</ul>
<h2 id="slurm-helper-scripts">Slurm helper scripts<a class="headerlink" href="#slurm-helper-scripts" title="Permanent link">#</a></h2>
<p>Just to highlight the highly useful <a href="https://github.com/OleHolmNielsen/Slurm_tools/">Slurm tools</a> written by the system administrator of Niflheim:</p>
<ul>
<li>
<p><code>showpartitions</code>: Show the load of the cluster, how many jobs are in queue for the different partitions. Available nodes are shown in green.</p>
</li>
<li>
<p><code>showuserjobs</code>: List the running and queued jobs per user.</p>
</li>
<li>
<p><code>pestat</code>: List the status of nodes running jobs. <code>pestat -u $USER</code> will show your running jobs. Badly behaving jobs are highlighted in red.</p>
</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.1e8ae164.min.js"></script>
      
    
  </body>
</html>